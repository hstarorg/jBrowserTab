!function(n,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?module.exports=i():n.jBrowserTab=i()}(this,function(){var n={},i={_hiddenKey:null,valueInArray:function(n,e){var t=!1;return i.each(e,function(i,e){if(i===n)return t=!0,!1}),t},each:function(n,i){for(var e=0,t=n.length;e<t;e++){var o=i(n[e],e);if(o===!1)return}},notifyHandlers:function(e){var t=n.visibilitychange;t&&t.length>0&&i.each(t,function(n,i){"function"==typeof n&&n.call(null,e)})},_init:function(){var n="hidden";n in document?document.addEventListener("visibilitychange",this._onVisibilityChange,!1):(n="mozHidden")in document?document.addEventListener("mozvisibilitychange",this._onVisibilityChange,!1):(n="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",this._onVisibilityChange,!1):(n="msHidden")in document?document.addEventListener("msvisibilitychange",this._onVisibilityChange,!1):"onfocusin"in document?(n="focusinout",document.onfocusin=document.onfocusout=this._onVisibilityChange):(this.hiddenKey="other",window.onpageshow=window.onpagehide=window.onfocus=window.onblur=this._onVisibilityChange),this._hiddenKey=n},_onVisibilityChange:function(n){n=n||window.event;var e=!1;e=i.valueInArray(i._hiddenKey,["hidden","mozHidden","webkitHidden","msHidden"])?!document[i._hiddenKey]:"focusinout"===i._hiddenKey?"focusin"===n.type:i.valueInArray(n.type,["onpageshow","onfocus"]),i.notifyHandlers(e)}},e={on:function(i,e){n[i]||(n[i]=[]),n[i].push(e)},off:function(i,e){if(n[i])if(void 0===e)n[i].length=0;else for(var t=n[i].length-1;t>=0;t--)n[i][t]===e&&n[i].splice(t,1)}};return i._init(),e});